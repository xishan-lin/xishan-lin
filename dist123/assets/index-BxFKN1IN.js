import{_ as F,P as I,a as O}from"./pdf.worker-D2Xr92nv.js";import{d as k,r as n,o as T,y as $,e as _,f as b,g as N,h as l,k as v,i as m,j as x,l as D,F as U,p as j,n as E,s as W}from"./index-Bx2V1Y-J.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G=s=>(j("data-v-7a401e96"),s=s(),E(),s),J={class:"top-container"},M=G(()=>l("div",{class:"main-center"},[l("canvas",{id:"pdf-canvas"})],-1)),q={class:"bottom-container"},H={name:"PdfOnceViewer"},K=k({...H,setup(s){const d=n(1),p=n(100),P=n("default"),w=n(!1),S=n(!1),C=t=>{console.log(`${t} items per page`)},y=t=>{console.log(`current page: ${t}`),f(t)};let h=null,u=n(0),z=n("https://raw.githubusercontent.com/xishan-lin/resourcesRepo/main/genealogy/莆田林氏西山本支族谱(卷一).pdf"),B=n(1.3);T(()=>{R(z.value)});const R=async t=>{F.workerSrc=JSON.stringify(I),O(t).promise.then(e=>{e.loadingParams.disableAutoFetch=!0,e.loadingParams.disableStream=!0,h=e,u.value=e.numPages,console.log("pdfPages = ",u.value),$(()=>{f(1)})}).catch(e=>{console.warn(`[upthen] pdfReader loadFile error: ${e}`)})},f=t=>{h.getPage(t).then(a=>{a.cleanup();const e=document.getElementById("pdf-canvas");if(e){const o=e.getContext("2d"),g=window.devicePixelRatio||1,r=o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,i=g/r,c=a.getViewport({scale:B.value});e.width=c.width*i,e.height=c.height*i,e.style.width=c.width+"px",e.style.height=c.height+"px",o.setTransform(i,0,0,i,0,0);const V={canvasContext:o,viewport:c};a.render(V)}})};return(t,a)=>{const e=_("el-button"),o=_("el-scrollbar"),g=_("el-pagination");return b(),N(U,null,[l("div",J,[v(" 我是top部：第一页 "),m(e,{type:"primary"},{default:x(()=>[v(" 下载 ")]),_:1})]),m(o,{class:"container-main"},{default:x(()=>[M]),_:1}),l("div",q,[m(g,{"current-page":d.value,"onUpdate:currentPage":a[0]||(a[0]=r=>d.value=r),"page-size":p.value,"onUpdate:pageSize":a[1]||(a[1]=r=>p.value=r),size:P.value,disabled:S.value,background:w.value,layout:"prev, pager, next, jumper",total:D(u),onSizeChange:C,onCurrentChange:y},null,8,["current-page","page-size","size","disabled","background","total"])])],64)}}}),L=A(K,[["__scopeId","data-v-7a401e96"]]),Q={name:"PDFOnceView"},ee=k({...Q,setup(s){return(d,p)=>(b(),W(L))}});export{ee as default};
