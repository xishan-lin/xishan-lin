import{_ as V,P as F,a as I}from"./pdf.worker-BzGYLPhc.js";import{d as v,r as n,o as O,A as T,e as u,f as k,g as $,l,j as x,h as g,i as b,n as N,F as z,p as D,q as j,x as A}from"./index-B-TCadFN.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U=s=>(D("data-v-3e15aa2b"),s=s(),j(),s),W={class:"top-container"},q=U(()=>l("div",{class:"main-center"},[l("canvas",{id:"pdf-canvas"})],-1)),G={class:"bottom-container"},J={name:"PdfOnceViewer"},M=v({...J,setup(s){const i=n(1),m=n(!1),P=n(!1),w=t=>{console.log(`${t} items per page`)},S=t=>{console.log(`current page: ${t}`),f(t)};let h=null,d=n(0),C=n("https://raw.githubusercontent.com/xishan-lin/resourcesRepo/main/genealogy/莆田林氏西山本支族谱(卷一).pdf"),y=n(1.3);O(()=>{B(C.value)});const B=async t=>{V.workerSrc=JSON.stringify(F),I(t).promise.then(e=>{e.loadingParams.disableAutoFetch=!0,e.loadingParams.disableStream=!0,h=e,d.value=e.numPages,console.log("pdfPages = ",d.value),T(()=>{f(1)})}).catch(e=>{console.warn(`[upthen] pdfReader loadFile error: ${e}`)})},f=t=>{h.getPage(t).then(o=>{o.cleanup();const e=document.getElementById("pdf-canvas");if(e){const a=e.getContext("2d"),p=window.devicePixelRatio||1,_=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1,c=p/_,r=o.getViewport({scale:y.value});e.width=r.width*c,e.height=r.height*c,e.style.width=r.width+"px",e.style.height=r.height+"px",a.setTransform(c,0,0,c,0,0);const R={canvasContext:a,viewport:r};o.render(R)}})};return(t,o)=>{const e=u("el-button"),a=u("el-scrollbar"),p=u("el-pagination");return k(),$(z,null,[l("div",W,[x(" 我是top部：第一页 "),g(e,{type:"primary"},{default:b(()=>[x(" 下载 ")]),_:1})]),g(a,{class:"container-main"},{default:b(()=>[q]),_:1}),l("div",G,[g(p,{"current-page":i.value,"onUpdate:currentPage":o[0]||(o[0]=_=>i.value=_),disabled:P.value,background:m.value,layout:"prev, pager, next, jumper",total:N(d),onSizeChange:w,onCurrentChange:S},null,8,["current-page","disabled","background","total"])])],64)}}}),H=E(M,[["__scopeId","data-v-3e15aa2b"]]),K={name:"PDFOnceView"},Y=v({...K,setup(s){return(i,m)=>(k(),A(H))}});export{Y as default};
