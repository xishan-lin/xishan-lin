import{r as v,c as X,o as l2,A as L,d as a2,u as o2,e as T,g as i,B as $,C as K,l,t as r,h as c,i as m,n,D as W,f as o,x as Y,G as M,H as Q,j as G,I as s2,F as j,v as Z,s as p,J as F,K as i2,p as r2,q as c2}from"./index-B-TCadFN.js";import{f as u2}from"./family-xishan-data-xPLV9-iA.js";import{i as e2}from"./useFamilyTreeVerify-DjMIuK7s.js";import{_ as v2}from"./_plugin-vue_export-helper-DlAUqK2U.js";const d2="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='142.92px'%20viewBox='0%200%201433%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%234680FF'%20d='M1228.8%201024H204.8c-112.64%200-204.8-92.16-204.8-204.8V204.8C0%2092.16%2092.16%200%20204.8%200h1024c112.64%200%20204.8%2092.16%20204.8%20204.8v614.4c0%20112.64-92.16%20204.8-204.8%20204.8zM204.8%2051.2C122.88%2051.2%2051.2%20122.88%2051.2%20204.8v614.4c0%2081.92%2071.68%20153.6%20153.6%20153.6h1024c81.92%200%20153.6-71.68%20153.6-153.6V204.8c0-81.92-71.68-153.6-153.6-153.6H204.8z'%20/%3e%3cpath%20fill='%234680FF'%20d='M686.08%20614.4l-40.96-10.24c0%2051.2%200%2081.92-10.24%20102.4%200%2010.24-20.48%2020.48-30.72%2020.48h-102.4c-10.24%200-10.24-10.24-10.24-30.72v-204.8h163.84V245.76H430.08v40.96H614.4v163.84H440.32v256c0%2040.96%2010.24%2061.44%2040.96%2061.44h122.88c30.72%200%2051.2-10.24%2061.44-30.72%2010.24-20.48%2020.48-61.44%2020.48-122.88zM133.12%20235.52v40.96h81.92v71.68h-61.44v419.84h40.96v-20.48h174.08v30.72H409.6V358.4h-81.92v-71.68H409.6v-51.2H133.12z%20m51.2%20460.8v-51.2h174.08v61.44H184.32z%20m40.96-296.96v40.96c0%2061.44-10.24%2092.16-30.72%20122.88l20.48%2020.48c30.72-30.72%2040.96-81.92%2040.96-143.36v-40.96h40.96V512c0%2030.72%2010.24%2040.96%2040.96%2040.96h30.72v51.2H184.32v-204.8h40.96z%20m30.72-40.96v-71.68h40.96v71.68h-40.96z%20m102.4%20153.6h-20.48c-10.24%200-10.24%200-10.24-10.24v-102.4h40.96V512z%20m593.92-276.48v235.52h133.12v51.2H921.6v256h40.96V563.2h112.64v81.92c-30.72%200-61.44%200-92.16%2010.24l10.24%2040.96c71.68-10.24%20133.12-10.24%20174.08-20.48%200%2010.24%2010.24%2020.48%2010.24%2040.96l30.72-10.24c-10.24-40.96-20.48-81.92-30.72-112.64l-30.72%2010.24c0%2010.24%2010.24%2030.72%2010.24%2040.96-10.24%200-30.72%2010.24-51.2%2010.24v-92.16H1228.8v143.36c0%2020.48-10.24%2030.72-30.72%2030.72h-51.2l10.24%2040.96h71.68c30.72%200%2051.2-20.48%2051.2-61.44V522.24H1126.4v-51.2h133.12V235.52h-307.2z%20m256%20204.8H1126.4v-61.44h92.16v61.44z%20m-133.12%200h-81.92v-61.44h81.92v61.44z%20m-81.92-102.4v-61.44h81.92v61.44h-81.92z%20m133.12-61.44h92.16v61.44H1126.4v-61.44zM819.2%20430.08v348.16h40.96V358.4L921.6%20235.52l-40.96-20.48c-30.72%2092.16-81.92%20174.08-143.36%20245.76l10.24%2051.2c30.72-30.72%2051.2-51.2%2071.68-81.92z'%20/%3e%3c/svg%3e",h2="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='150.04px'%20viewBox='0%200%201365%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%200h1137.777778a227.555556%20227.555556%200%200%201%20227.555555%20227.555556v796.444444H227.555556a227.555556%20227.555556%200%200%201-227.555556-227.555556V0z'%20fill='%233687FF'%20/%3e%3cpath%20d='M384.341333%20475.363556v47.786666h287.402667v202.752c0%2020.48-10.922667%2031.402667-32.768%2031.402667-39.594667%200-75.776-0.682667-109.909333-2.048l12.970666%2047.786667h116.736c41.642667%200%2062.805333-20.48%2062.805334-61.44v-218.453334h259.413333v-47.786666h-259.413333v-71.68a1320.220444%201320.220444%200%200%200%20185.002666-145.408v-46.421334h-450.56v46.421334h383.658667a1037.880889%201037.880889%200%200%201-167.936%20120.149333v96.938667H384.341333z'%20fill='%23FFFFFF'%20/%3e%3c/svg%3e",p2="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='150.04px'%20viewBox='0%200%201365%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%200h1137.777778a227.555556%20227.555556%200%200%201%20227.555555%20227.555556v796.444444H227.555556a227.555556%20227.555556%200%200%201-227.555556-227.555556V0z'%20fill='%23FF5A75'%20/%3e%3cpath%20d='M380.928%20340.195556v47.104h159.744c-23.210667%2051.2-47.786667%20101.717333-73.728%20152.234666%2077.141333%2027.306667%20144.725333%2055.978667%20202.752%2084.650667-67.584%2057.344-161.792%20103.082667-283.306667%20137.216l26.624%2045.056c131.072-39.594667%20232.106667-92.16%20304.469334-157.013333l23.210666%2013.653333c70.314667%2041.642667%20136.533333%2089.429333%20199.338667%20142.677333l36.864-36.181333a1315.84%201315.84%200%200%200-186.368-134.485333c-12.288-6.826667-24.576-14.336-38.229333-21.162667%2049.834667-57.344%2085.333333-133.12%20106.496-226.645333h125.610666V340.195556h-116.053333c2.730667-21.162667%205.461333-43.008%208.192-66.218667l-48.469333-3.413333c-2.730667%2023.210667-5.461333%2046.421333-9.557334%2069.632h-201.386666c19.114667-45.056%2038.229333-93.525333%2058.709333-146.773334l-49.834667-15.018666a3995.306667%203995.306667%200%200%201-64.853333%20161.792H380.928z%20m324.949333%20249.856a1641.756444%201641.756444%200%200%200-172.032-71.68c20.48-39.594667%2040.96-83.285333%2062.805334-131.072h211.626666c-21.162667%2083.285333-55.296%20150.186667-101.717333%20202.069333l-0.682667%200.682667z'%20fill='%23FFFFFF'%20/%3e%3c/svg%3e";function g2(){const y=v(""),b=v(""),k=v(u2);function V(g,s,d){return g.map(t=>{const u=!s||t.name.includes(s),h=!d||typeof t.rankingChar=="string"&&t.rankingChar.includes(d);let _;return t.children&&(_=V(t.children,s,d)),u&&h||_&&_.length?{...t,children:_||[]}:null}).filter(Boolean)}const D=X(()=>V(k.value,y.value,b.value)),I=v(600);l2(()=>{L(()=>{const g=window.innerHeight,s=document.querySelector(".filter-input"),d=(s==null?void 0:s.offsetHeight)||0,t=window.getComputedStyle(s),u=parseFloat(t.marginBottom)||0;I.value=g-d-u-48})});const S=v([{value:"all",label:"总",color:"#409eff"},{value:"fuJian",label:"入闽",color:"#67c23a"},{value:"puTian",label:"莆田",color:"#e6a23c"},{value:"queXia",label:"阙下",color:"#f56c6c"},{value:"hanJiang",label:"涵江",color:"#67c23a"},{value:"xiShan",label:"西山",color:"#409EFF"}]);function f(g){const s=S.value.find(d=>d.value===g);return s?s.color:"#409eff"}const x=v();return{filterNameText:y,filterRankText:b,treeData:k,filteredTreeData:D,treeHeight:I,generationTypeOptions:S,getGenerationColor:f,treeRef:x,expandAll:()=>{L(()=>{if(x.value&&D.value){const g=d=>d.reduce((t,u)=>(t.push(u.id),u.children&&u.children.length&&(t=t.concat(g(u.children))),t),[]),s=g(D.value);x.value.setExpandedKeys(s)}})},collapseAll:()=>{L(()=>{x.value&&x.value.setExpandedKeys([])})}}}const J=y=>(r2("data-v-4e609904"),y=y(),c2(),y),m2={key:0,class:"family-tree-view"},f2={class:"stats-panel"},_2=J(()=>l("div",{class:"stats-header"},[l("span",null,"家谱统计（含配偶）")],-1)),y2={class:"stats-content"},x2={class:"tree-main-panel"},w2={class:"search-div"},k2={class:"moreFilter"},V2={class:"moreFilter-content"},C2={class:"tree-item-div"},T2=["onClick"],F2={key:0},D2={key:0,class:"generation-info"},z2={key:1,class:"spouse-info",style:{display:"flex","align-items":"center"}},H2=J(()=>l("img",{src:d2,style:{width:"24px",height:"17px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},null,-1)),b2=["onClick"],I2={key:2,class:"son-daughter-info",style:{display:"flex","align-items":"center"}},S2=J(()=>l("img",{src:h2,style:{width:"24px",height:"17px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},null,-1)),A2={key:3,class:"son-daughter-info",style:{display:"flex","align-items":"center"}},B2=J(()=>l("img",{src:p2,style:{width:"24px",height:"17px","margin-right":"4px",display:"inline-block","vertical-align":"middle"}},null,-1)),E2={key:1,class:"not-verified"},M2=a2({__name:"FamilyTreeView",setup(y){const{treeData:b,filterNameText:k,filterRankText:V,filteredTreeData:D,treeHeight:I,generationTypeOptions:S,getGenerationColor:f,treeRef:x,expandAll:U,collapseAll:q}=g2(),g=o2(),s=v(!0);function d(A){let a=0,B=0,z=0,E=0,w=0;function H(R){for(const e of R)a++,e.gender==="男"&&B++,e.gender==="女"&&z++,e.isAlive===!0&&E++,e.isAlive===!1&&w++,e.children&&e.children.length&&H(e.children),e.spouse&&e.spouse.length&&H(e.spouse)}return H(A),{total:a,male:B,female:z,alive:E,dead:w}}const t=X(()=>d(b.value)),u=v(!0),h=v(["xiShan"]),_=v(!0),P=v(!1),N=v(!1),n2={value:"id",label:"name",children:"children"},O=A=>{g.push({name:"family-tree-detail",params:{id:A.id}})};l2(()=>{e2()&&U()});const t2=X(()=>e2());return(A,a)=>{const B=T("DArrowLeft"),z=T("el-icon"),E=T("DArrowRight"),w=T("el-checkbox"),H=T("el-color-picker"),R=T("el-checkbox-group");return t2.value?(o(),i("div",m2,[$(l("div",f2,[_2,l("div",y2,[l("div",null,"总人数："+r(t.value.total),1),l("div",null,"男性："+r(t.value.male),1),l("div",null,"女性："+r(t.value.female),1),l("div",null,"在世："+r(t.value.alive),1),l("div",null,"不在世："+r(t.value.dead),1)])],512),[[K,s.value]]),c(n(M),{class:"show-btn",onClick:a[0]||(a[0]=e=>s.value=!s.value)},{default:m(()=>[s.value?(o(),Y(z,{key:0,size:"20px"},{default:m(()=>[c(B)]),_:1})):(o(),Y(z,{key:1,size:"20px"},{default:m(()=>[c(E)]),_:1}))]),_:1}),l("div",x2,[l("div",w2,[c(n(Q),{modelValue:n(k),"onUpdate:modelValue":a[1]||(a[1]=e=>W(k)?k.value=e:null),placeholder:"输入姓名筛选",clearable:"",class:"filter-input"},null,8,["modelValue"]),c(n(Q),{modelValue:n(V),"onUpdate:modelValue":a[2]||(a[2]=e=>W(V)?V.value=e:null),placeholder:"输入排行筛选",clearable:"",class:"filter-input"},null,8,["modelValue"]),c(n(M),{type:"primary",onClick:n(U)},{default:m(()=>[G("全部展开")]),_:1},8,["onClick"]),c(n(M),{type:"primary",onClick:n(q)},{default:m(()=>[G("全部折叠")]),_:1},8,["onClick"])]),l("div",k2,[c(n(M),{class:"more-btn",onClick:a[3]||(a[3]=e=>u.value=!u.value),text:""},{default:m(()=>[G(" 更多筛选 "),l("span",{class:s2(["arrow",u.value?"up":"down"])},null,2)]),_:1}),$(l("div",V2,[c(R,{modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=e=>h.value=e),style:{display:"flex","align-items":"center",gap:"30px"}},{default:m(()=>[(o(!0),i(j,null,Z(n(S),e=>(o(),i("div",{key:e.value,style:{display:"flex","align-items":"center",gap:"8px"}},[c(w,{value:e.value},{default:m(()=>[G(r(e.label),1)]),_:2},1032,["value"]),c(H,{modelValue:e.color,"onUpdate:modelValue":C=>e.color=C,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},8,["modelValue"]),c(w,{modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value=e),label:"配偶",size:"large"},null,8,["modelValue"]),c(w,{modelValue:P.value,"onUpdate:modelValue":a[6]||(a[6]=e=>P.value=e),label:"子",size:"large"},null,8,["modelValue"]),c(w,{modelValue:N.value,"onUpdate:modelValue":a[7]||(a[7]=e=>N.value=e),label:"女",size:"large"},null,8,["modelValue"])],512),[[K,u.value]])]),c(n(i2),{ref_key:"treeRef",ref:x,data:n(D),props:n2,height:n(I),"expand-on-click-node":!0,"highlight-current":!0,indent:40},{default:m(({data:e})=>[l("div",C2,[l("div",{onClick:C=>O(e)},[l("span",null,r(e.name),1),e.rankingChar?(o(),i("span",F2," - "+r(e.rankingChar),1)):p("",!0)],8,T2),h.value.length>0?(o(),i("div",D2,[e.generationInAll&&h.value.includes("all")?(o(),i("span",{key:0,style:F({color:n(f)("all")})},"[总:"+r(e.generationInAll)+"]",5)):p("",!0),e.generationInFuJian&&h.value.includes("fuJian")?(o(),i("span",{key:1,style:F({color:n(f)("fuJian")})},"[入闽:"+r(e.generationInFuJian)+"]",5)):p("",!0),e.generationInPuTian&&h.value.includes("puTian")?(o(),i("span",{key:2,style:F({color:n(f)("puTian")})},"[莆田:"+r(e.generationInPuTian)+"]",5)):p("",!0),e.generationInQueXia&&h.value.includes("queXia")?(o(),i("span",{key:3,style:F({color:n(f)("queXia")})},"[阙下:"+r(e.generationInQueXia)+"]",5)):p("",!0),e.generationInHanJiang&&h.value.includes("hanJiang")?(o(),i("span",{key:4,style:F({color:n(f)("hanJiang")})},"[涵江:"+r(e.generationInHanJiang)+"]",5)):p("",!0),e.generationInXiShan&&h.value.includes("xiShan")?(o(),i("span",{key:5,style:F({color:n(f)("xiShan")})},"[西山:"+r(e.generationInXiShan)+"]",5)):p("",!0)])):p("",!0),e.spouse&&e.spouse.length>0&&_.value?(o(),i("div",z2,[H2,(o(!0),i(j,null,Z(e.spouse,C=>(o(),i("span",{key:C.id,onClick:G2=>O(C),style:{cursor:"pointer",color:"#409eff"}}," ["+r(C.name)+"] ",9,b2))),128))])):p("",!0),e.son&&e.son>0&&P.value?(o(),i("div",I2,[S2,l("span",null,r(e.son),1)])):p("",!0),e.daughter&&e.daughter>0&&N.value?(o(),i("div",A2,[B2,l("span",null,r(e.daughter),1)])):p("",!0)])]),_:1},8,["data","height"])])])):(o(),i("div",E2,"未通过验证，无法查看内容"))}}}),R2=v2(M2,[["__scopeId","data-v-4e609904"]]);export{R2 as default};
